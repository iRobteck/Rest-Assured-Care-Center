DROP TABLE TREATMENT_TYPE CASCADE CONSTRAINTS;
DROP TABLE APPOINTMENT CASCADE CONSTRAINTS;
DROP TABLE PATIENT CASCADE CONSTRAINTS;
DROP TABLE TEST_SESSION CASCADE CONSTRAINTS;
DROP TABLE THER_SESSION CASCADE CONSTRAINTS;
DROP TABLE DRUG CASCADE CONSTRAINTS;

CREATE TABLE TREATMENT_TYPE(
	TREAT_TYPE_ID	NUMBER NOT NULL,
	DESCRIPTION	VARCHAR(20),
	
	CONSTRAINT	pk_TREATMENT_TYPE PRIMARY KEY (TREAT_TYPE_ID)
);

CREATE TABLE PATIENT(
	PATIENT_ID	NUMBER NOT NULL,
	PATIENT_NAME	VARCHAR (20),
	PATIENT_DOB	DATE,
	PATIENT_ADDRESS	VARCHAR (20),
	CITY VARCHAR (20),
	PATIENT_TEL_NO	VARCHAR(20),
	PATIENT_EMAIL	VARCHAR  (20),
	PATIENT_POST_CODE	VARCHAR(20),
	PATIENT_GENDER VARCHAR(20),
	
	CONSTRAINT	pk_PATIENT PRIMARY KEY (PATIENT_ID)
);

CREATE TABLE APPOINTMENT(
	APP_ID	NUMBER NOT NULL,
	PATIENT_ID	NUMBER,
	APP_DATE	DATE,
    APP_TIME VARCHAR(10),
    TREAT_TYPE_ID number REFERENCES TREATMENT_TYPE (TREAT_TYPE_ID),
	CONSTRAINT	pk_APPOINTMENT PRIMARY KEY (APP_ID),
    FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT (PATIENT_ID) ON DELETE CASCADE
    
);
CREATE TABLE TEST_SESSION(
	TEST_SESSION_ID	NUMBER NOT NULL,
	TEST_TYPE	VARCHAR(20),
    TREAT_TYPE_ID	NUMBER,
	
	CONSTRAINT	pk_TEST_SESSION PRIMARY KEY (TEST_SESSION_ID),
    FOREIGN KEY (TREAT_TYPE_ID) REFERENCES TREATMENT_TYPE (TREAT_TYPE_ID)
);
CREATE TABLE THER_SESSION(
	THER_SESSION_ID	NUMBER NOT NULL,
	THER_TYPE	VARCHAR(20),
    TREAT_TYPE_ID	NUMBER,
	
	CONSTRAINT	pk_THER_SESSION PRIMARY KEY (THER_SESSION_ID),
    FOREIGN KEY (TREAT_TYPE_ID) REFERENCES TREATMENT_TYPE (TREAT_TYPE_ID)
);

CREATE TABLE DRUG(
	DRUG_ID	NUMBER NOT NULL,
	DRUG_NAME	VARCHAR(20),
    DOSE NUMBER(3),
    MANUFACTURER VARCHAR(30),
    EXP_DATE DATE,
    TREAT_TYPE_ID	NUMBER,

	CONSTRAINT	pk_DRUG PRIMARY KEY (DRUG_ID),
    FOREIGN KEY (TREAT_TYPE_ID) REFERENCES TREATMENT_TYPE (TREAT_TYPE_ID)
);


--TREATMENT_TYPE--
INSERT INTO   TREATMENT_TYPE (TREAT_TYPE_ID, DESCRIPTION) 
VALUES (1,'DRUG');
INSERT INTO   TREATMENT_TYPE (TREAT_TYPE_ID, DESCRIPTION) 
VALUES (2,'THERAPY SESSION');
INSERT INTO   TREATMENT_TYPE (TREAT_TYPE_ID, DESCRIPTION) 
VALUES (3,'TEST SESSION');

--PATIENT--
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (1, 'Aishat', '6/12/1995','Oxley Res','Leeds', '07896221235', 'aishat@gmail.com', 'LS16 7GN', 'female');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (2, 'John', '9/15/1990','Spring Road','Leeds', '07895255909', 'jn@gmail.com', 'LS17 1EF', 'male');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (3, 'Stephen', '10/15/1989','Chapel street','Braford', '07340852142', 'steph@gmail.com', 'BA6 6EF', 'male');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (4, 'Laura', '7/12/1989','Cardigan Road', 'Leeds','07369845632', 'laura@gmail.com', 'LS6 6EF', 'female');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (5, 'Michael', '8/12/1980','Market view','York', '07895220089', 'michael@gmail.com', 'YR7 9EF', 'male');

INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (6, 'Seun', '6/12/1985','Oxley Res', 'York','07896626235', 'seun@gmail.com', 'YR6 7GN', 'others');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (7, 'Lola', '9/15/2002','Steve Road', 'Selby','07891155909', 'lola@gmail.com', 'SE24 1EF', 'female');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (8, 'Winifred', '10/15/1988','Chapel street','Wakefield', '073408521902', 'winne@ymail.com', 'WF16 6EF', 'others');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY,PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (9, 'Faith', '7/7/1989','Preston Road', 'Wakefield','07368155632', 'fatty@gmail.com', 'WF16 7GF', 'female');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (10, 'Michael', '8/12/1980','Market square', 'Leeds','07830228221', 'mikky@rocketmail.com', 'LS7 9EF', 'male');

INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (11, 'Patience', '1/1/2001','Beeston','Wakefield', '07813121235', 'pat@gmail.com', 'LS16 7GG', 'female');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (12, 'Peter', '10/15/1990','Otley', 'Harrogate','07800255909', 'peter@gmail.com', 'HG4 1FG', 'male');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (13, 'Stephen', '10/15/2011','Chapel street','Harrogate', '07340852142', 'steve@gmail.com', 'HG6 6EF', 'others');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (14, 'Isaac', '7/12/1995','Hyde Park', 'Leeds','07369844144', 'zikky@gmail.com', 'LS6 9GG', 'male');
INSERT INTO   PATIENT (PATIENT_ID, PATIENT_NAME, PATIENT_DOB, PATIENT_ADDRESS, CITY, PATIENT_TEL_NO, PATIENT_EMAIL, PATIENT_POST_CODE, PATIENT_GENDER) 
VALUES (15, 'Glory', '7/7/1990','Hyde Park','Leeds', '07899220089', 'glo@gmail.com', 'LS9 5FE', 'female');


--APPOINTMENT--
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES (1, 1, TO_DATE('2023-05-05', 'YYYY-MM-DD'), '10:00am', 1);
 INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES (2, 2, TO_DATE('2023-05-05', 'YYYY-MM-DD'), '11:30am', 3);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (3, 3, TO_DATE('2023-05-05', 'YYYY-MM-DD'), '2:00pm', 2);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (4, 4, TO_DATE('2023-05-05', 'YYYY-MM-DD'), '4:30pm', 1);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (5, 5, TO_DATE('2023-05-05', 'YYYY-MM-DD'), '9:00am', 1);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)

VALUES  (6, 6, TO_DATE('2023-05-11', 'YYYY-MM-DD'), '1:00pm', 2);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (7, 7, TO_DATE('2023-05-11', 'YYYY-MM-DD'), '10:30am', 3);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES (8, 8, TO_DATE('2023-05-11', 'YYYY-MM-DD'), '3:00pm', 3);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (9, 9, TO_DATE('2023-05-11', 'YYYY-MM-DD'), '11:00am', 1);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES (10, 10, TO_DATE('2023-05-11', 'YYYY-MM-DD'), '2:30pm', 2);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)

VALUES  (11, 11, TO_DATE('2023-05-24', 'YYYY-MM-DD'), '9:30am', 3);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (12, 12, TO_DATE('2023-05-26', 'YYYY-MM-DD'), '4:00pm', 3);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES (13, 13, TO_DATE('2023-05-28', 'YYYY-MM-DD'), '10:00am', 1);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES (14, 14, TO_DATE('2023-05-30', 'YYYY-MM-DD'), '3:30pm', 2);
INSERT INTO APPOINTMENT(APP_ID, PATIENT_ID, APP_DATE, APP_TIME, TREAT_TYPE_ID)
VALUES  (15, 15, TO_DATE('2023-06-02', 'YYYY-MM-DD'), '11:30am', 3);

--TEST SESSION--
INSERT INTO   TEST_SESSION (TEST_SESSION_ID, TEST_TYPE, TREAT_TYPE_ID) 
VALUES (1,'H Pylori', 3);
INSERT INTO   TEST_SESSION (TEST_SESSION_ID, TEST_TYPE, TREAT_TYPE_ID) 
VALUES (2,'Blood Count', 3);
INSERT INTO   TEST_SESSION (TEST_SESSION_ID, TEST_TYPE, TREAT_TYPE_ID) 
VALUES (3,'Creatinine', 3);
INSERT INTO   TEST_SESSION (TEST_SESSION_ID, TEST_TYPE, TREAT_TYPE_ID) 
VALUES (4,'Testosterone', 3);

--THERAPY SESSION--
INSERT INTO   THER_SESSION (THER_SESSION_ID, THER_TYPE, TREAT_TYPE_ID) 
VALUES (1,'Cancer Management', 2);
INSERT INTO   THER_SESSION (THER_SESSION_ID, THER_TYPE, TREAT_TYPE_ID) 
VALUES (2,'Support therapy', 2);
INSERT INTO   THER_SESSION (THER_SESSION_ID, THER_TYPE, TREAT_TYPE_ID) 
VALUES (3,'CBT', 2);
INSERT INTO   THER_SESSION (THER_SESSION_ID, THER_TYPE, TREAT_TYPE_ID) 
VALUES (4,'Psychotherapy', 2);

--DRUG--
INSERT INTO   DRUG (DRUG_ID, DRUG_NAME, DOSE, MANUFACTURER, EXP_DATE, TREAT_TYPE_ID) 
VALUES (1,'Paracetamol', 3 , 'Luex Pharm', '10/2/2025', 1);
INSERT INTO   DRUG (DRUG_ID, DRUG_NAME, DOSE, MANUFACTURER, EXP_DATE, TREAT_TYPE_ID) 
VALUES (2,'Feroglobine', 5 , 'Vitabiotics', '10/2/2025', 1);
INSERT INTO   DRUG (DRUG_ID, DRUG_NAME, DOSE, MANUFACTURER, EXP_DATE, TREAT_TYPE_ID)
VALUES (3,'Metformin', 4 , 'Obimet', '10/2/2025', 1);
INSERT INTO   DRUG (DRUG_ID, DRUG_NAME, DOSE, MANUFACTURER, EXP_DATE, TREAT_TYPE_ID)
VALUES (4,'Pioglitazone', 10, 'Entrance Pharma', '10/2/2025', 1);


DROP sequence TREATMENT_SEQ;
CREATE SEQUENCE TREATMENT_SEQ
	START WITH     4
 	INCREMENT BY   1;

CREATE OR REPLACE TRIGGER TREATMENT_TRIG
BEFORE INSERT ON TREATMENT_TYPE
FOR EACH ROW
BEGIN
	IF :NEW.TREAT_TYPE_ID IS NULL THEN
	SELECT TREATMENT_SEQ.NEXTVAL INTO :NEW.TREAT_TYPE_ID FROM SYS.DUAL;
	END IF;
END;
/
COMMIT;

DROP sequence PATIENT_SEQ;
CREATE SEQUENCE PATIENT_SEQ
	START WITH     16
 	INCREMENT BY   1;

CREATE OR REPLACE TRIGGER PATIENT_TRIG
BEFORE INSERT ON PATIENT
FOR EACH ROW
BEGIN
	IF :NEW.PATIENT_ID IS NULL THEN
	SELECT PATIENT_SEQ.NEXTVAL INTO :NEW.PATIENT_ID FROM SYS.DUAL;
	END IF;
END;
/
COMMIT;

DROP sequence APPOINTMENT_SEQ;
CREATE SEQUENCE APPOINTMENT_SEQ
	START WITH     16
 	INCREMENT BY   1;

CREATE OR REPLACE TRIGGER APPOINTMENT_TRIG
BEFORE INSERT ON APPOINTMENT
FOR EACH ROW
BEGIN
	IF :NEW.APP_ID IS NULL THEN
	SELECT APPOINTMENT_SEQ.NEXTVAL INTO :NEW.APP_ID FROM SYS.DUAL;
	END IF;
END;
/
COMMIT;

DROP sequence TEST_SEQ;
CREATE SEQUENCE TEST_SEQ
	START WITH     5
 	INCREMENT BY   1;

CREATE OR REPLACE TRIGGER TEST_TRIG
BEFORE INSERT ON TEST_SESSION
FOR EACH ROW
BEGIN
	IF :NEW.TEST_SESSION_ID IS NULL THEN
	SELECT TEST_SEQ.NEXTVAL INTO :NEW.TEST_SESSION_ID FROM SYS.DUAL;
	END IF;
END;
/
COMMIT;

DROP sequence THER_SEQ;
CREATE SEQUENCE THER_SEQ
	START WITH     5
 	INCREMENT BY   1;

CREATE OR REPLACE TRIGGER THER_TRIG
BEFORE INSERT ON THER_SESSION
FOR EACH ROW
BEGIN
	IF :NEW.THER_SESSION_ID IS NULL THEN
	SELECT THER_SEQ.NEXTVAL INTO :NEW.THER_SESSION_ID FROM SYS.DUAL;
	END IF;
END;
/
COMMIT;

DROP sequence DRUG_SEQ;
CREATE SEQUENCE DRUG_SEQ
	START WITH     5
 	INCREMENT BY   1;

CREATE OR REPLACE TRIGGER DRUG_TRIG
BEFORE INSERT ON DRUG
FOR EACH ROW
BEGIN
	IF :NEW.DRUG_ID IS NULL THEN
	SELECT DRUG_SEQ.NEXTVAL INTO :NEW.DRUG_ID FROM SYS.DUAL;
	END IF;
END;
/
COMMIT;